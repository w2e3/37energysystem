<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>360全景图</title>
    <meta name="renderer" content="webkit">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <!-- 启用webAPP全屏模式-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- 隐藏状态栏或者设置状态栏的颜色-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- 禁止缓存访问页面-->
    <meta http-equiv="Pragma" content="no-cache">
    <meta name="applicable-device" content="mobile">
    <!-- 页面关键词-->
    <!--<link rel="stylesheet" href="css/demo01.css">-->
    <script src="three.min.js"></script>
    <script src="photo-sphere-viewer.min.js"></script>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none;
            box-sizing: border-box;
            text-decoration: none;
            border: 0;
            outline: 0;
        }
        .main{
            /*max-width: 640px;*/
            width: 100%;
            margin: 0 auto;
        }
        .main h3{
            text-align: center;
            padding: 10px 0;
        }

    </style>
    <script>
        //必须在服务器上才能看到效果！
        window.onload = function () {
            getTitleHeight();
            loadingAllImg();
        }
        //让全景图刚好撑满屏幕
        var canvasHeight;
        function getTitleHeight() {
//            var title = document.getElementById('title');
//            var titleHeight = parseFloat(getComputedStyle(title).height);
            var maxHeight = window.innerHeight;
//            canvasHeight = parseFloat(maxHeight - titleHeight) + 'px';
            canvasHeight = parseFloat(maxHeight) + 'px';
        }
        //全景图参数配置函数
        function loadingAllImg() {
            var div = document.getElementById('container');
            var PSV = new PhotoSphereViewer({
                // 全景图的完整路径
                panorama: 'p1.jpg',

                // 放全景图的元素
                container: div,

                // 可选，默认值为2000，全景图在time_anim毫秒后会自动进行动画。（设置为false禁用它）
                time_anim: false,

                // 可选值，默认为false。显示导航条。
                navbar: true,

                // 可选，默认值null，全景图容器的最终尺寸。例如：{width: 500, height: 300}。
                size: {
                    width: '100%',
                    height: canvasHeight
                }
            });
        }
    </script>
</head>
<body>
<div class="main">
    <!--<h3 id="title">ATP 3D全景图演示效果（支持角度调整、缩放）</h3>-->
    <div id="container"></div>
</div>
</body>
</html>