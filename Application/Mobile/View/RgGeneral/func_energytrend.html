<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>统计查看</title>
    <link rel="stylesheet" href="__PUBLIC__/mobile/css/bootstrap.css">
    <style>
        .nav-tabs {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
<div class="row">
    <div class="col-lg-8 col-sm-6 m-b-xs">
        <div data-toggle="buttons" class="btn-group nav-tabs" style="width: 80%;">
            <?php if($is_ysl){
              if($is_active=='ysl'){ ?>
            <label class="btn btn-sm btn-white active" data-target="0">
                <input type="radio" id="option1" name="options">用水量</label>
            <?php  }else { ?>
            <label class="btn btn-sm btn-white" data-target="0">
                <input type="radio" id="option1" name="options">用水量</label>
            <?php }} ?>
            <?php if($is_ydl){
              if($is_active=='ydl'){ ?>
            <label class="btn btn-sm btn-white active" data-target="1">
                <input type="radio" id="option2" name="options">电量值</label>
            <?php  }else { ?>
            <label class="btn btn-sm btn-white" data-target="1">
                <input type="radio" id="option2" name="options">电量值</label>
            <?php }} ?>
            <?php if($is_ynl){
              if($is_active=='ynl'){ ?>
            <label class="btn btn-sm btn-white active" data-target="2">
                <input type="radio" id="option3" name="options">暖能用量</label>
            <?php  }else { ?>
            <label class="btn btn-sm btn-white" data-target="2">
                <input type="radio" id="option3" name="options">暖能用量</label>
            <?php }}?>
            <?php if($is_yll){
              if($is_active=='yll'){ ?>
            <label class="btn btn-sm btn-white active" data-target="3">
                <input type="radio" id="option4" name="options">冷能用量</label>
            <?php  }else { ?>
            <label class="btn btn-sm btn-white" data-target="3">
                <input type="radio" id="option4" name="options">冷能用量</label>
            <?php }}?>

            <!--<label class="btn btn-sm btn-white active" data-target="0">-->
            <!--<input type="radio" id="option1" name="options">用水量</label>-->
            <!--<label class="btn btn-sm btn-white" data-target="1">-->
            <!--<input type="radio" id="option2" name="options">电量值</label>-->
            <!--<label class="btn btn-sm btn-white" data-target="2">-->
            <!--<input type="radio" id="option3" name="options">暖能用量</label>-->
            <!--<label class="btn btn-sm btn-white" data-target="3">-->
            <!--<input type="radio" id="option4" name="options">冷能用量</label>-->
        </div>
    </div>
    <div class="ctab cbody tab-content" style="margin-left: 35px;">
        <?php if($is_ysl){
              if($is_active=='ysl'){ ?>
        <div class="ctab content active" id="charts1" style="height: 280px;"></div>
        <?php  }else { ?>
        <div class="ctab content" id="charts1" style="display: none;height: 280px;"></div>
        <?php }} ?>
        <?php if($is_ydl){
              if($is_active=='ydl'){ ?>
        <div class="ctab content active" id="charts2" style="height: 300px;"></div>
        <?php  }else { ?>
        <div class="ctab content" id="charts2" style="display: none;height: 300px;"></div>
        <?php }} ?>
        <?php if($is_ynl){
              if($is_active=='ynl'){ ?>
        <div class="ctab content active" id="charts3" style="height: 300px;"></div>
        <?php  }else { ?>
        <div class="ctab content" id="charts3" style="display: none;height: 300px;"></div>
        <?php }}?>
        <?php if($is_yll){
              if($is_active=='yll'){ ?>
        <div class="ctab content active" id="charts4" style="height: 300px;"></div>
        <?php  }else { ?>
        <div class="ctab content" id="charts4" style="display: none;height: 300px;"></div>
        <?php }}?>

        <!--<div class="ctab content " id="charts1" style="height: 280px;">-->
        <!--</div>-->
        <!--<div class="ctab content active" id="charts2" style="display: none;height: 300px;">-->
        <!--</div>-->
        <!--<div class="ctab content " id="charts3" style="display: none;height: 300px;">-->
        <!--</div>-->
        <!--<div class="ctab content " id="charts4" style="display:none;height: 300px;">-->
        <!--</div>-->
    </div>
</div>
<script src="__PUBLIC__/mobile/js/jquery-1.12.4.js"></script>
<script src="__PUBLIC__/mobile/js/bootstrap.js"></script>
<script src="__PUBLIC__/mobile/js/echarts.js"></script>

<script>
    var charts = [];
    var opts = [{
        color:['#0099cc'],
        title: {
            text: '用水量',
            left: '20px'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        legend: {
            data: ['用水量']
        },
        toolbox: {
            show: false,
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: true },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: {
            data: {$day7_arr},
            axisLabel:{
                interval:0,//横轴信息全部显示
                rotate:+40,//-30度角倾斜显示
            }
        },
        yAxis: {},
        series: [{
            name: '用水量',
            type: 'bar',
            data: {$ysl_arr_7}
        }]
    }, {
        color:['#3366cc'],
        title: {
            text: '电量值',
            left: '20px'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        legend: {
            data: ['电量值']
        },
        toolbox: {
            show: false,
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: true },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: {
            data: {$day7_arr},
            axisLabel:{
                interval:0,//横轴信息全部显示
                rotate:+40,//-30度角倾斜显示
            }
        },
        yAxis: {},
        series: [{
            name: '电量值',
            type: 'bar',
            data:{$ydl_arr_7}
        }]
    }, {
        color:['#ff6347'],
        title: {
            text: '暖能用量',
            left: '20px'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        legend: {
            data: ['暖能用量']
        },
        toolbox: {
            show: false,
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: true },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: [{
            type: 'category',
            data:{$day7_arr},
            axisLabel:{
                interval:0,//横轴信息全部显示
                rotate:+40,//-30度角倾斜显示
            }
        }],
        yAxis: [{
            // type: 'value'
        }],
        // visualMap: {
        // show: false,
        // min: 0,
        // max: 400,
        // range: [0, 370],
        // inRange: { color: ['red', 'blue', 'green'] },
        // outOfRange: {
        // color: ['red', 'rgba(3,4,5,0.4)', 'yellow'],
        // symbolSize: [30, 100]
        // }
        // },
        series: [{
            name: '暖能用量',
            type: 'bar',
            data: {$ynl_arr_7}
        }]
    }, {
        color:['#40e0d0'],
        title: {
            text: '冷能用量',
            left: '20px'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: { // 坐标轴指示器，坐标轴触发有效
                type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        legend: {
            data: ['冷能用量']
        },
        toolbox: {
            show: false,
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: true },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: {
            type: 'category',
            data: {$day7_arr},
            axisLabel:{
                interval:0,//横轴信息全部显示
                rotate:+40,//-30度角倾斜显示
            }
        },
        yAxis: {},
        series: [{
            name: '冷能用量',
            type: 'bar',
            data: {$yll_arr_7}
        }]
    }];
</script>
<script>
    var show_index=null;
    var div_id;
    $(function() {
        $(".cbody>.content:gt(0)").hide();
        $(".nav-tabs ").delegate('label', 'click', function(e) {
            if ($(this).hasClass("active")) {
                return;
            }
            $(this).addClass('active').siblings('label').removeClass("active");
            var index = $(this).data('target');
//                console.log(index);
            $('.cbody>.content:eq(' + index + ')').show(function() {
                charts[index].setOption(opts[index]);
                charts[index].resize();
            }).siblings().hide();

        });
        $(".cbody>.content").each(function() {
//                console.log($(this).get(0));
//                console.log($(this).attr('id'));
            if(div_id==null)
            {
                div_id=$(this).attr('id');
            }
            charts.push(echarts.init($(this).get(0)));
        });
//            console.log(div_id);
        if(div_id=='charts1') {
            show_index=0;
        } else if(div_id=='charts2') {
            show_index=1;
        } else if(div_id=='charts3') {
            show_index=2;
        } else if(div_id=='charts4') {
            show_index=3;
        }
//            console.log(charts);
//            console.log(show_index);
        charts[0].setOption(opts[show_index]);
    });
    $(window).resize(function() {
        $(charts).each(function(index, chart) {
            chart.resize();
        });
    });
</script>
</body>
<style type="text/css">
    canvas{width: 85%;margin-top: 120px;}
    #charts{margin-left: 20px;}
    #charts{margin-left: 20px;}
    #charts{margin-left: 20px;}
</style>
</html>